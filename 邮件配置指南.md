# 邮件验证码配置指南

## 问题说明

当前系统使用的是 **Ethereal 测试邮件服务**，它不会真正发送邮件到您的邮箱，只会生成一个预览链接。

## 解决方案：配置真实 SMTP 服务器

### 方案 1：使用 Gmail（推荐）

#### 步骤 1：启用 Gmail 的"应用专用密码"

1. 登录您的 Gmail 账号
2. 访问：https://myaccount.google.com/apppasswords
3. 选择"应用"：邮件
4. 选择"设备"：其他（自定义名称，如"Future Teller"）
5. 点击"生成"
6. **复制生成的 16 位密码**（格式类似：`abcd efgh ijkl mnop`）

#### 步骤 2：配置 .env 文件

在 `backend` 目录下创建 `.env` 文件（如果不存在），添加以下配置：

```env
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=abcd efgh ijkl mnop
SMTP_FROM_EMAIL=your-email@gmail.com
```

**注意**：
- `SMTP_USER`：您的 Gmail 邮箱地址
- `SMTP_PASS`：刚才生成的 16 位应用专用密码（**不是您的 Gmail 登录密码**）
- `SMTP_FROM_EMAIL`：发送邮件的发件人地址（通常与 `SMTP_USER` 相同）

#### 步骤 3：重启后端服务

配置完成后，重启后端服务：

```bash
# 停止当前服务（Ctrl + C）
# 然后重新启动
npm run dev
```

---

### 方案 2：使用 QQ 邮箱

#### 步骤 1：开启 QQ 邮箱的 SMTP 服务

1. 登录 QQ 邮箱
2. 点击"设置" → "账户"
3. 找到"POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务"
4. 开启"POP3/SMTP服务"或"IMAP/SMTP服务"
5. 按照提示发送短信验证，获取**授权码**（16位字符）

#### 步骤 2：配置 .env 文件

```env
SMTP_HOST=smtp.qq.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-qq-number@qq.com
SMTP_PASS=your-authorization-code
SMTP_FROM_EMAIL=your-qq-number@qq.com
```

**注意**：
- `SMTP_USER`：您的 QQ 邮箱地址（格式：`123456789@qq.com`）
- `SMTP_PASS`：QQ 邮箱的授权码（**不是您的 QQ 密码**）

---

### 方案 3：使用 163 邮箱

#### 步骤 1：开启 163 邮箱的 SMTP 服务

1. 登录 163 邮箱
2. 点击"设置" → "POP3/SMTP/IMAP"
3. 开启"POP3/SMTP服务"和"IMAP/SMTP服务"
4. 设置授权码（如果未设置）

#### 步骤 2：配置 .env 文件

```env
SMTP_HOST=smtp.163.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=your-email@163.com
SMTP_PASS=your-authorization-code
SMTP_FROM_EMAIL=your-email@163.com
```

---

## 验证配置

配置完成后，点击注册页面的"获取验证码"按钮，您应该能在邮箱中收到验证码邮件。

如果仍然无法收到邮件，请检查：

1. **后端控制台是否有错误信息**
2. **邮箱的垃圾邮件文件夹**
3. **SMTP 配置是否正确**（特别是密码/授权码）
4. **网络连接是否正常**

---

## 临时测试方案

如果您暂时不想配置真实 SMTP，可以：

1. 点击"获取验证码"后
2. 查看后端控制台（终端）的输出
3. 找到类似 `🔗 预览 URL: https://ethereal.email/...` 的链接
4. 点击该链接查看验证码

**注意**：这只是临时测试方案，生产环境必须配置真实的 SMTP 服务器。

