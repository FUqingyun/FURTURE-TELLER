# 环境配置总结

## ✅ 配置完成状态

### 已创建的文件

1. **后端环境变量文件** (`backend/.env`)
   - 服务器配置（端口: 5000）
   - 数据库配置（MongoDB）
   - JWT密钥配置
   - Stripe支付配置（需要填写实际密钥）
   - 文件上传配置
   - CORS配置

2. **前端环境变量文件** (`frontend/.env.local`)
   - API服务器地址
   - Stripe支付公钥（需要填写实际密钥）

3. **上传目录** (`backend/uploads`)
   - 用于存储上传的文件

### 环境变量内容

#### 后端环境变量 (`backend/.env`)

```
PORT=5000
NODE_ENV=development
MONGODB_URI=mongodb://localhost:27017/future_teller
JWT_SECRET=future_teller_jwt_secret_key_2024_change_in_production
JWT_EXPIRE=7d
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880
FRONTEND_URL=http://localhost:3000
```

#### 前端环境变量 (`frontend/.env.local`)

```
NEXT_PUBLIC_API_URL=http://localhost:5000/api
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
```

## 📋 下一步操作

### 1. 安装依赖

运行以下命令安装所有依赖：

```bash
npm run install:all
```

或者分别安装：

```bash
# 安装根目录依赖
npm install

# 安装后端依赖
cd backend
npm install

# 安装前端依赖
cd ../frontend
npm install
```

### 2. 启动MongoDB

确保MongoDB服务正在运行：

**Windows:**
```bash
mongod
# 或者
net start MongoDB
```

**macOS:**
```bash
brew services start mongodb-community
```

**Linux:**
```bash
sudo systemctl start mongod
```

### 3. 配置Stripe（可选）

如果使用支付功能：

1. 注册Stripe账号: https://stripe.com
2. 获取测试密钥:
   - 登录Stripe Dashboard
   - 进入 "Developers" > "API keys"
   - 复制 "Publishable key" 和 "Secret key"
3. 更新环境变量:
   - 编辑 `backend/.env`，更新 `STRIPE_SECRET_KEY`
   - 编辑 `frontend/.env.local`，更新 `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`

**注意**: 如果不使用支付功能，可以暂时跳过此配置。

### 4. 启动开发服务器

**方式一：同时启动前后端**
```bash
npm run dev
```

**方式二：分别启动**
```bash
# 终端1：启动后端
npm run dev:backend

# 终端2：启动前端
npm run dev:frontend
```

### 5. 访问应用

- **前端**: http://localhost:3000
- **后端API**: http://localhost:5000/api
- **健康检查**: http://localhost:5000/api/health

## 🔍 环境检查

运行环境检查脚本：

**PowerShell:**
```bash
.\check-env.ps1
```

**Node.js:**
```bash
npm run check-env
```

## ⚠️ 注意事项

1. **不要提交环境变量文件**
   - `.env` 和 `.env.local` 文件已在 `.gitignore` 中
   - 不要将这些文件提交到Git仓库

2. **生产环境配置**
   - 在生产环境中，请使用更安全的JWT密钥
   - 使用Stripe生产环境密钥
   - 配置适当的CORS策略

3. **MongoDB连接**
   - 确保MongoDB服务正在运行
   - 如果MongoDB需要认证，请在连接字符串中包含用户名和密码

## 📚 相关文档

- [README.md](./README.md) - 项目说明
- [SETUP.md](./SETUP.md) - 详细设置指南
- [ENV_CONFIG.md](./ENV_CONFIG.md) - 环境配置说明
- [QUICK_START.md](./QUICK_START.md) - 快速启动指南

## 🎉 配置完成！

环境配置已完成，可以开始安装依赖和启动开发服务器了！



