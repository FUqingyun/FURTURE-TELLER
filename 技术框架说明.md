# Future Teller é¡¹ç›®æŠ€æœ¯æ¡†æ¶è¯´æ˜

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª**ç®—å‘½å¸ˆä¸å®¢æˆ·æ²Ÿé€šå¹³å°**ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒå®æ—¶èŠå¤©ã€è®¢å•ç®¡ç†ã€æ”¯ä»˜ç­‰åŠŸèƒ½ã€‚

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
Future Teller Project
â”œâ”€â”€ backend/          # åç«¯æœåŠ¡ (Node.js + Express)
â”œâ”€â”€ frontend/         # å‰ç«¯åº”ç”¨ (Next.js + React)
â””â”€â”€ package.json      # æ ¹ç›®å½•é…ç½®ï¼ˆç»Ÿä¸€å¯åŠ¨è„šæœ¬ï¼‰
```

**æ¶æ„æ¨¡å¼**: å‰åç«¯åˆ†ç¦» (Frontend-Backend Separation)

---

## ğŸ”§ åç«¯æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Node.js** - JavaScript è¿è¡Œæ—¶ç¯å¢ƒ
- **Express.js** (v4.18.2) - Web åº”ç”¨æ¡†æ¶
- **Socket.io** (v4.5.4) - å®æ—¶åŒå‘é€šä¿¡

### æ•°æ®åº“
- **MongoDB** - NoSQL æ•°æ®åº“
- **Mongoose** (v8.0.3) - MongoDB å¯¹è±¡å»ºæ¨¡å·¥å…·

### è®¤è¯ä¸å®‰å…¨
- **JWT** (jsonwebtoken v9.0.2) - èº«ä»½è®¤è¯ä»¤ç‰Œ
- **bcryptjs** (v2.4.3) - å¯†ç åŠ å¯†
- **express-validator** (v7.0.1) - è¯·æ±‚éªŒè¯

### æ”¯ä»˜é›†æˆ
- **Stripe** (v14.7.0) - æ”¯ä»˜å¤„ç†æœåŠ¡

### æ–‡ä»¶ä¸Šä¼ 
- **Multer** (v1.4.5-lts.1) - æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶

### å…¶ä»–å·¥å…·
- **CORS** (v2.8.5) - è·¨åŸŸèµ„æºå…±äº«
- **dotenv** (v16.3.1) - ç¯å¢ƒå˜é‡ç®¡ç†
- **nodemon** (v3.0.2) - å¼€å‘ç¯å¢ƒè‡ªåŠ¨é‡å¯

### åç«¯ç›®å½•ç»“æ„
```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ database.js          # MongoDB è¿æ¥é…ç½®
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ auth.js              # JWT è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ User.js              # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ FortuneTeller.js     # ç®—å‘½å¸ˆæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Message.js           # æ¶ˆæ¯æ¨¡å‹
â”‚   â”‚   â””â”€â”€ Order.js             # è®¢å•æ¨¡å‹
â”‚   â”œâ”€â”€ routes/                  # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.js              # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ fortuneTellers.js    # ç®—å‘½å¸ˆè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ messages.js          # æ¶ˆæ¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ orders.js            # è®¢å•è·¯ç”±
â”‚   â”‚   â””â”€â”€ payments.js          # æ”¯ä»˜è·¯ç”±
â”‚   â””â”€â”€ server.js                # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â””â”€â”€ uploads/                     # æ–‡ä»¶ä¸Šä¼ ç›®å½•
```

### åç«¯ API ç«¯ç‚¹
- `/api/auth` - ç”¨æˆ·è®¤è¯ï¼ˆç™»å½•ã€æ³¨å†Œï¼‰
- `/api/fortune-tellers` - ç®—å‘½å¸ˆç®¡ç†
- `/api/orders` - è®¢å•ç®¡ç†
- `/api/payments` - æ”¯ä»˜å¤„ç†
- `/api/messages` - æ¶ˆæ¯ç®¡ç†
- `/api/health` - å¥åº·æ£€æŸ¥

### å®æ—¶é€šä¿¡
- ä½¿ç”¨ **Socket.io** å®ç°å®æ—¶èŠå¤©åŠŸèƒ½
- åŸºäºè®¢å•IDåˆ›å»ºæˆ¿é—´ï¼ˆroomï¼‰
- æ”¯æŒæ¶ˆæ¯çš„å®æ—¶å‘é€å’Œæ¥æ”¶

---

## ğŸ¨ å‰ç«¯æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Next.js** (v14.0.4) - React å…¨æ ˆæ¡†æ¶
- **React** (v18.2.0) - UI åº“
- **TypeScript** (v5.3.3) - ç±»å‹å®‰å…¨

### çŠ¶æ€ç®¡ç†
- **Zustand** (v4.4.7) - è½»é‡çº§çŠ¶æ€ç®¡ç†
- **React Context API** - å…¨å±€çŠ¶æ€ï¼ˆè®¤è¯ä¸Šä¸‹æ–‡ï¼‰

### HTTP å®¢æˆ·ç«¯
- **Axios** (v1.6.2) - HTTP è¯·æ±‚åº“

### å®æ—¶é€šä¿¡
- **Socket.io-client** (v4.5.4) - WebSocket å®¢æˆ·ç«¯

### æ”¯ä»˜é›†æˆ
- **@stripe/stripe-js** (v2.2.0) - Stripe JS SDK
- **@stripe/react-stripe-js** (v2.4.0) - Stripe React ç»„ä»¶

### UI ä¸æ ·å¼
- **Tailwind CSS** (v3.4.0) - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **PostCSS** (v8.4.32) - CSS åå¤„ç†å™¨
- **Autoprefixer** (v10.4.16) - CSS è‡ªåŠ¨å‰ç¼€
- **react-icons** (v4.12.0) - å›¾æ ‡åº“
- **react-hot-toast** (v2.4.1) - é€šçŸ¥æç¤º

### å·¥å…·åº“
- **date-fns** (v2.30.0) - æ—¥æœŸå¤„ç†åº“

### å¼€å‘å·¥å…·
- **ESLint** (v8.56.0) - ä»£ç æ£€æŸ¥
- **eslint-config-next** (v14.0.4) - Next.js ESLint é…ç½®

### å‰ç«¯ç›®å½•ç»“æ„
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                     # Next.js App Router é¡µé¢
â”‚   â”‚   â”œâ”€â”€ page.tsx             # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ login/               # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ register/            # æ³¨å†Œé¡µ
â”‚   â”‚   â”œâ”€â”€ fortune-tellers/     # ç®—å‘½å¸ˆåˆ—è¡¨/è¯¦æƒ…é¡µ
â”‚   â”‚   â””â”€â”€ orders/              # è®¢å•ç®¡ç†é¡µ
â”‚   â”‚       â””â”€â”€ [id]/
â”‚   â”‚           â”œâ”€â”€ chat/        # èŠå¤©é¡µé¢
â”‚   â”‚           â””â”€â”€ payment/     # æ”¯ä»˜é¡µé¢
â”‚   â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Header.tsx           # å¤´éƒ¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FortuneTellerList.tsx # ç®—å‘½å¸ˆåˆ—è¡¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.tsx   # åŠ è½½åŠ¨ç”»
â”‚   â”‚   â””â”€â”€ SkeletonCard.tsx     # éª¨æ¶å±ç»„ä»¶
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â””â”€â”€ AuthContext.tsx      # è®¤è¯ä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ api.ts               # API è¯·æ±‚å°è£…
â”œâ”€â”€ globals.css                   # å…¨å±€æ ·å¼
â””â”€â”€ tailwind.config.js           # Tailwind é…ç½®
```

---

## ğŸ” è®¤è¯æœºåˆ¶

### è®¤è¯æµç¨‹
1. ç”¨æˆ·æ³¨å†Œ/ç™»å½• â†’ åç«¯éªŒè¯ â†’ è¿”å› JWT Token
2. å‰ç«¯å°† Token å­˜å‚¨åœ¨ `localStorage`
3. æ¯æ¬¡ API è¯·æ±‚åœ¨ Header ä¸­æºå¸¦ `Authorization: Bearer <token>`
4. åç«¯ä¸­é—´ä»¶éªŒè¯ Token æœ‰æ•ˆæ€§

### è®¤è¯ä¸­é—´ä»¶
- `protect` - éªŒè¯ç”¨æˆ·èº«ä»½
- `authorize` - åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶

---

## ğŸ’¾ æ•°æ®æ¨¡å‹

### æ ¸å¿ƒå®ä½“
1. **User** - ç”¨æˆ·ï¼ˆå®¢æˆ·/ç®—å‘½å¸ˆï¼‰
2. **FortuneTeller** - ç®—å‘½å¸ˆä¿¡æ¯
3. **Order** - è®¢å•
4. **Message** - èŠå¤©æ¶ˆæ¯

---

## ğŸ”„ æ•°æ®æµ

### è¯·æ±‚æµç¨‹
```
å‰ç«¯ (Next.js)
  â†“ Axios è¯·æ±‚
API æ‹¦æˆªå™¨æ·»åŠ  Token
  â†“ HTTP/HTTPS
åç«¯ (Express)
  â†“ è®¤è¯ä¸­é—´ä»¶éªŒè¯
è·¯ç”±å¤„ç†
  â†“ æ•°æ®åº“æ“ä½œ
MongoDB
```

### å®æ—¶é€šä¿¡æµç¨‹
```
å‰ç«¯ Socket.io-client
  â†“ WebSocket
åç«¯ Socket.io Server
  â†“ æˆ¿é—´ç®¡ç†
å®æ—¶æ¶ˆæ¯å¹¿æ’­
```

---

## ğŸš€ å¼€å‘ä¸éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ
- **åç«¯**: `npm run dev` (nodemon è‡ªåŠ¨é‡å¯)
- **å‰ç«¯**: `npm run dev` (Next.js å¼€å‘æœåŠ¡å™¨)
- **ç»Ÿä¸€å¯åŠ¨**: æ ¹ç›®å½• `npm run dev` (ä½¿ç”¨ concurrently)

### ç«¯å£é…ç½®
- **åç«¯**: é»˜è®¤ 5000 (`http://localhost:5000`)
- **å‰ç«¯**: é»˜è®¤ 3000 (`http://localhost:3000`)

### ç¯å¢ƒå˜é‡
- `.env` æ–‡ä»¶ç®¡ç†é…ç½®
- MongoDB è¿æ¥å­—ç¬¦ä¸²
- JWT å¯†é’¥
- Stripe API å¯†é’¥
- å‰ç«¯ API URL

---

## ğŸ“¦ ä¾èµ–ç®¡ç†

### æ ¹ç›®å½•
- `concurrently` - å¹¶è¡Œè¿è¡Œå¤šä¸ªå‘½ä»¤

### åç«¯ä¾èµ–
- ç”Ÿäº§ä¾èµ–ï¼šExpress, Mongoose, JWT, Socket.io, Stripe ç­‰
- å¼€å‘ä¾èµ–ï¼šnodemon

### å‰ç«¯ä¾èµ–
- ç”Ÿäº§ä¾èµ–ï¼šNext.js, React, Axios, Tailwind CSS ç­‰
- å¼€å‘ä¾èµ–ï¼šTypeScript, ESLint, PostCSS ç­‰

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

1. **ç”¨æˆ·è®¤è¯** - æ³¨å†Œã€ç™»å½•ã€JWT è®¤è¯
2. **ç®—å‘½å¸ˆç®¡ç†** - åˆ—è¡¨å±•ç¤ºã€è¯¦æƒ…æŸ¥çœ‹
3. **è®¢å•ç³»ç»Ÿ** - åˆ›å»ºè®¢å•ã€è®¢å•ç®¡ç†
4. **å®æ—¶èŠå¤©** - Socket.io å®æ—¶æ¶ˆæ¯
5. **æ”¯ä»˜é›†æˆ** - Stripe æ”¯ä»˜å¤„ç†
6. **æ–‡ä»¶ä¸Šä¼ ** - Multer å¤„ç†æ–‡ä»¶ä¸Šä¼ 

---

## ğŸ” æŠ€æœ¯ç‰¹ç‚¹

### ä¼˜åŠ¿
- âœ… **å‰åç«¯åˆ†ç¦»** - æ¸…æ™°çš„èŒè´£åˆ’åˆ†
- âœ… **å®æ—¶é€šä¿¡** - Socket.io æ”¯æŒå®æ—¶èŠå¤©
- âœ… **ç±»å‹å®‰å…¨** - TypeScript æä¾›ç±»å‹æ£€æŸ¥
- âœ… **ç°ä»£åŒ– UI** - Tailwind CSS å¿«é€Ÿæ„å»ºç•Œé¢
- âœ… **RESTful API** - æ ‡å‡†çš„ API è®¾è®¡
- âœ… **JWT è®¤è¯** - æ— çŠ¶æ€çš„è®¤è¯æœºåˆ¶

### æŠ€æœ¯é€‰å‹ç†ç”±
- **Next.js**: æœåŠ¡ç«¯æ¸²æŸ“ã€è·¯ç”±ã€API è·¯ç”±ä¸€ä½“åŒ–
- **MongoDB**: çµæ´»çš„æ–‡æ¡£ç»“æ„ï¼Œé€‚åˆå¿«é€Ÿè¿­ä»£
- **Socket.io**: è·¨æµè§ˆå™¨å…¼å®¹çš„å®æ—¶é€šä¿¡
- **Stripe**: æˆç†Ÿçš„æ”¯ä»˜è§£å†³æ–¹æ¡ˆ
- **Tailwind CSS**: å¿«é€Ÿå¼€å‘ï¼Œæ˜“äºç»´æŠ¤

---

## ğŸ“ æ€»ç»“

è¿™æ˜¯ä¸€ä¸ªé‡‡ç”¨**ç°ä»£å…¨æ ˆæŠ€æœ¯**æ„å»ºçš„å¹³å°ï¼Œåç«¯ä½¿ç”¨ **Node.js + Express + MongoDB**ï¼Œå‰ç«¯ä½¿ç”¨ **Next.js + React + TypeScript**ï¼Œé€šè¿‡ **Socket.io** å®ç°å®æ—¶é€šä¿¡ï¼Œé›†æˆ **Stripe** å¤„ç†æ”¯ä»˜ã€‚æ•´ä½“æ¶æ„æ¸…æ™°ï¼ŒæŠ€æœ¯æ ˆæˆç†Ÿç¨³å®šï¼Œé€‚åˆå¿«é€Ÿå¼€å‘å’Œæ‰©å±•ã€‚

